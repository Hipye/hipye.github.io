<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on 拾集</title><link>https://www.omoe.cc/post/</link><description>Recent content in Posts on 拾集</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>©2019 Notepadium.</copyright><lastBuildDate>Thu, 10 Nov 2022 06:33:00 +0000</lastBuildDate><atom:link href="https://www.omoe.cc/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Ndk交叉编译aria2</title><link>https://www.omoe.cc/post/ndk%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91aria2/</link><pubDate>Thu, 10 Nov 2022 06:33:00 +0000</pubDate><guid>https://www.omoe.cc/post/ndk%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91aria2/</guid><description>&lt;p>交叉编译aria2&lt;/p>
&lt;p>下载交叉编译工具(这里推荐r21e比较稳定且兼容)&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">系统版本&lt;/th>
&lt;th style="text-align:center">链接&lt;/th>
&lt;th style="text-align:center">sha1&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">linux&lt;/td>
&lt;td style="text-align:center">&lt;a href="https://dl.google.com/android/repository/android-ndk-r21e-linux-x86_64.zip"target="_blank" rel="noopener noreferrer">https://dl.google.com/android/repository/android-ndk-r21e-linux-x86_64.zip&lt;/a>
&lt;/td>
&lt;td style="text-align:center">c3ebc83c96a4d7f539bd72c241b2be9dcd29bda9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">win&lt;/td>
&lt;td style="text-align:center">&lt;a href="https://dl.google.com/android/repository/android-ndk-r21e-windows-x86_64.zip"target="_blank" rel="noopener noreferrer">https://dl.google.com/android/repository/android-ndk-r21e-windows-x86_64.zip&lt;/a>
&lt;/td>
&lt;td style="text-align:center">fc44fea8bb3f5a6789821f40f41dce2d2cd5dc30&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">mac&lt;/td>
&lt;td style="text-align:center">&lt;a href="https://dl.google.com/android/repository/android-ndk-r21e-darwin-x86_64.zip"target="_blank" rel="noopener noreferrer">https://dl.google.com/android/repository/android-ndk-r21e-darwin-x86_64.zip&lt;/a>
&lt;/td>
&lt;td style="text-align:center">3f15c23a1c247ad17c7c271806848dbd40434738&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>导入交叉编译工具&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>$PATH:/opt/android-ndk-r21e/toolchains/llvm/prebuilt/linux-x86_64/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>自带sdk管理器&lt;/code>下载&lt;/p>
&lt;pre tabindex="0">&lt;code>sdkmanager \
&amp;#34;platform-tools&amp;#34; \
&amp;#34;build-tools;28.0.3&amp;#34; \
&amp;#34;platforms;android-33&amp;#34; \
&amp;#34;platforms;android-28&amp;#34; \
&amp;#34;platforms;android-24&amp;#34; \
&amp;#34;platforms;android-21&amp;#34;
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>PKG_CONFIG_PATH=/data/data/com.termux/files/usr/lib/pkgconfig/ LD_LIBRARY_PATH=/data/data/com.termux/files/usr/lib
export CROSS_COMPILE=armv7a-linux-androideabi- --prefix=/data/data/com.termux/files/usr android
&lt;/code>&lt;/pre>&lt;p>交叉编译&lt;code>openssl&lt;/code>lib库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar LD&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ld
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ./Configure android-arm64 -D__ANDROID_API__&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">21&lt;/span> --prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>zlib&lt;/code>静态库文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure --prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr --static
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>expat&lt;/code>静态库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--host&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--build&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>dpkg-architecture -qDEB_BUILD_GNU_TYPE&lt;span style="color:#e6db74">`&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--enable-static&lt;span style="color:#f92672">=&lt;/span>yes &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--enable-shared&lt;span style="color:#f92672">=&lt;/span>no
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>c-ares&lt;/code>静态库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--host&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--build&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>dpkg-architecture -qDEB_BUILD_GNU_TYPE&lt;span style="color:#e6db74">`&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--enable-static &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--disable-shared
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>openssl&lt;/code>静态库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./Configure &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>android-arm64 -march&lt;span style="color:#f92672">=&lt;/span>armv8-a -mtune&lt;span style="color:#f92672">=&lt;/span>cortex-a53 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>shared zlib zlib-dynamic -D_GNU_SOURCE -D_BSD_SOURCE &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-zlib-lib&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-zlib-include&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/include
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>libssh2&lt;/code>静态库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CPPFLAGS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;-I,/data/data/com.termux/files/usr/include&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LDFLAGS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;-Wl,-rpath-link,/data/data/com.termux/files/usr/lib&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/data/data/com.termux/files/usr&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-libssl-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-libz-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--host&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>sqlite&lt;/code>静态库&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure --host&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ --enable-static &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--enable-shared &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--build&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>dpkg-architecture -qDEB_BUILD_GNU_TYPE&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在编译 aria2时因为1.36相比1.35有修改所以必须修改到源码部分才能顺利编译&lt;/p>
&lt;p>&lt;strong>这一步必须↓操作，不然进行&lt;code>ARIA2_STATIC=yes&lt;/code>链接会失败&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s|-lrt||g;s|-lpthread||g&amp;#39;&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>grep -rEl &lt;span style="color:#e6db74">&amp;#39;\-lrt|\-lpthread&amp;#39;&lt;/span> .&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s|timegm(|timegm_(|g&amp;#39;&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>grep -rl &lt;span style="color:#e6db74">&amp;#39;timegm(&amp;#39;&lt;/span> .&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>开始编译&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/pkgconfig/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LD_LIBRARY_PATH&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/lib/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CXX&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>CC&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android29-clang &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>AR&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>RANLIB&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android-ranlib &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>./configure &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--host&lt;span style="color:#f92672">=&lt;/span>aarch64-linux-android &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--build&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>dpkg-architecture -qDEB_BUILD_GNU_TYPE&lt;span style="color:#e6db74">`&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--disable-nls &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--without-gnutls &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-openssl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--without-libxml2 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-libz --with-libz-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-libexpat --with-libexpat-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-slite3 --with-sqlite3-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-libcares --with-libcares-prefix&lt;span style="color:#f92672">=&lt;/span>/data/data/com.termux/files/usr/ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>--with-ca-bundle&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;/data/data/com.termux/files/usr/ssl/certs/ca-certificates.crt&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>LDFLAGS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;-L/data/data/com.termux/files/usr/lib&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/data/data/com.termux/files/usr/lib/pkgconfig&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>ARIA2_STATIC&lt;span style="color:#f92672">=&lt;/span>yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>aria2&lt;/code>&lt;/p>
&lt;p>&lt;code>系统自带工具&lt;/code>打包&lt;/p>
&lt;pre tabindex="0">&lt;code>sudo checkinstall -D --install=no
&lt;/code>&lt;/pre>&lt;p>The package documentation directory ./doc-pak does not exist.
Should I create a default set of package docs? [y]:n&lt;em>不需要创建doc文档&lt;/em>&lt;/p>
&lt;pre tabindex="0">&lt;code>0 - Maintainer: [ root@DESKTOP-U5H0M22 ]#编译设备
1 - Summary: [ moriz build aria2 ]#自定义信息
2 - Name: [ aria2 ]#文件名&amp;amp;卸载用
3 - Version: [ 1.36.0 ]#版本
4 - Release: [ 1 ]#发布
5 - License: [ GPL ]#协议
6 - Group: [ checkinstall ]#可忽略
7 - Architecture: [ aarch64 ]#编译目标的cpu架构
8 - Source location: [ aria2-release-1.36.0 ]#可忽略
9 - Alternate source location: [ ]#可忽略
10 - Requires: [ libc++, c-ares, openssl, libxml2, zlib ]#软件所需依赖包
11 - Recommends: [ ]#可忽略
12 - Suggests: [ ]#可忽略
13 - Provides: [ aria2-release ]#可忽略
14 - Conflicts: [ ]#可忽略
15 - Replaces: [ ]#可忽略
&lt;/code>&lt;/pre>&lt;p>&lt;font color="#C12414">&lt;u>注意选项7必须修改目标设备的cpu架构&lt;/u>&lt;/font>
成功后显示内容如下，文件所在文件夹和安装过程提示，后面安装过程略过&lt;/p>
&lt;pre tabindex="0">&lt;code>**********************************************************************
Done. The new package has been saved to
$HOME/aria2-release-1.36.0/aria2-release_1.36.0-1_aarch64.deb
You can install it in your system anytime using:
dpkg -i aria2-release_1.36.0-1_aarch64.deb
**********************************************************************
&lt;/code>&lt;/pre>&lt;p>新建文件夹解包&lt;/p>
&lt;pre tabindex="0">&lt;code>pkg-deb -R xxxxx.deb .
&lt;/code>&lt;/pre>&lt;p>重新打包&lt;code>命令不一样&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>dpkg -b xxx new_deb_name.deb
&lt;/code>&lt;/pre>&lt;p>安装使用&lt;code>dpkg -i&lt;/code>，使用&lt;code>aria2c --v&lt;/code>，出现如下内容成功&lt;/p>
&lt;pre tabindex="0">&lt;code>aria2 version 1.36.0
Copyright (C) 2006, 2019 Tatsuhiro Tsujikawa
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
** Configuration **
Enabled Features: Async DNS, BitTorrent, Firefox3 Cookie, GZip, HTTPS, Message Digest, Metalink, XML-RPC, SFTP
Hash Algorithms: sha-1, sha-224, sha-256, sha-384, sha-512, md5, adler32
Libraries: zlib/1.2.13 expat/2.5.0 sqlite3/3.39.4 OpenSSL/1.1.1s c-ares/1.18.1 libssh2/1.10.0
Compiler: clang 9.0.9 (https://android.googlesource.com/toolchain/llvm-project a2a1e703c0edb03ba29944e529ccbf457742737b)
built by x86_64-pc-linux-gnu
targeting aarch64-unknown-linux-android
on Nov 10 2022 15:30:40
System: Linux 4.19.113-perf-g4a878ec38421 #1 SMP PREEMPT Tue May 11 02:13:41 CST 2021 aarch64
Report bugs to https://github.com/aria2/aria2/issues
Visit https://aria2.github.io/
&lt;/code>&lt;/pre></description></item><item><title>编译aria2添加128线程下载</title><link>https://www.omoe.cc/post/%E7%BC%96%E8%AF%91aria2%E6%B7%BB%E5%8A%A0128%E7%BA%BF%E7%A8%8B%E4%B8%8B%E8%BD%BD/</link><pubDate>Wed, 09 Nov 2022 18:04:30 +0000</pubDate><guid>https://www.omoe.cc/post/%E7%BC%96%E8%AF%91aria2%E6%B7%BB%E5%8A%A0128%E7%BA%BF%E7%A8%8B%E4%B8%8B%E8%BD%BD/</guid><description>&lt;p>aria2编译细节以及error处理&lt;/p>
&lt;p>使用文档&lt;br>
&lt;a href="https://aria2.github.io/"target="_blank" rel="noopener noreferrer">官方文档(en)&lt;/a>
&lt;/p>
&lt;h3 id="编译前注意事项">编译前注意事项&lt;/h3>
&lt;p>根据系统以及平台的不同，编译的方法大同小异。仅提供linux发行版[ubuntu]的编译方法。
国内的网络特殊原因，在&lt;a href="https://www.github.com"target="_blank" rel="noopener noreferrer">github&lt;/a>
上下载作者提供的&lt;a href="https://github.com/aria2/aria2/releases"target="_blank" rel="noopener noreferrer">源码&lt;/a>
的时候会出现下载失败以及访问龟速&lt;strong>开全局代理&lt;/strong>&lt;/p>
&lt;p>因为不是和我存在同样操作环境下可能会有不同状况发生请善用&lt;a href="https://www.google.com"target="_blank" rel="noopener noreferrer">google&lt;/a>
或者&lt;a href="https://www.baidu.com"target="_blank" rel="noopener noreferrer">百度&lt;/a>
&lt;/p>
&lt;hr>
&lt;h3 id="添加依赖">添加依赖&lt;/h3>
&lt;p>更新系统的软件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get update -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt-get upgrade -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>安装编译时官方说明需要的依赖&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get install libgnutls28-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>nettle-dev libgmp-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libssh2-1-dev libc-ares-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libxml2-dev zlib1g-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libsqlite3-dev pkg-config &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libcppunit-dev autoconf &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>automake autotools-dev autopoint libtool &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>git gcc g++ libxml2-dev make quilt libtool
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>centos指令如下&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install gcc-g++ gcc -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="源码下载">源码下载&lt;/h4>
&lt;p>下载aria2的源码&lt;a href="https://github.com/aria2/aria2/archive/release-1.36.0.tar.gz"target="_blank" rel="noopener noreferrer">1.36&lt;/a>
&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget https://github.com/aria2/aria2/archive/release-1.36.0.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>源码包里的文件树&lt;/p>
&lt;pre tabindex="0">&lt;code>.
├── ABOUT-NLS
├── aclocal.m4
├── android-config
├── AUTHORS
├── autom4te.cache
├── ChangeLog
├── compile
├── config.guess
├── config.h
├── config.h.in
├── config.log
├── config.rpath
├── config.status
├── config.sub
├── configure
├── configure.ac
├── COPYING
├── depcomp
├── deps
├── doc
├── Dockerfile.mingw
├── Dockerfile.raspberrypi
├── examples
├── INSTALL
├── install-sh
├── lib
├── libtool
├── LICENSE.OpenSSL
├── ltmain.sh
├── m4
├── Makefile
├── Makefile.am
├── Makefile.in
├── makerelease
├── makerelease-osx.mk
├── mingw-build-memo
├── mingw-config
├── mingw-release
├── missing
├── NEWS
├── osx-package
├── po
├── README
├── README.html
├── README.rst
├── script-helper
├── src
├── stamp-h1
├── test
└── test-driver
&lt;/code>&lt;/pre>&lt;p>需要修改的只有&lt;code>./src&lt;/code>下的文件，没有这个目录则需要执行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>autoreconf -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改128线程&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;1&amp;#34;, 1, 16/&amp;#34;128&amp;#34;, 1, -1/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;20M&amp;#34;, 1_m, 1_g/&amp;#34;4K&amp;#34;, 1_k, 1_g/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/PREF_CONNECT_TIMEOUT, TEXT_CONNECT_TIMEOUT, &amp;#34;60&amp;#34;, 1, 600/PREF_CONNECT_TIMEOUT, TEXT_CONNECT_TIMEOUT, &amp;#34;30&amp;#34;, 1, 600/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/PREF_PIECE_LENGTH, TEXT_PIECE_LENGTH, &amp;#34;1M&amp;#34;, 1_m, 1_g/PREF_PIECE_LENGTH, TEXT_PIECE_LENGTH, &amp;#34;4k&amp;#34;, 1_k, 1_g/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/new NumberOptionHandler(PREF_RETRY_WAIT, TEXT_RETRY_WAIT, &amp;#34;0&amp;#34;, 0, 600/new NumberOptionHandler(PREF_RETRY_WAIT, TEXT_RETRY_WAIT, &amp;#34;2&amp;#34;, 0, 600/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;s/new NumberOptionHandler(PREF_SPLIT, TEXT_SPLIT, &amp;#34;5&amp;#34;, 1, -1,/new NumberOptionHandler(PREF_SPLIT, TEXT_SPLIT, &amp;#34;8&amp;#34;, 1, -1,/g&amp;#39;&lt;/span> ./src/OptionHandlerFactory.cc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="编译">编译&lt;/h3>
&lt;pre tabindex="0">&lt;code>./configure --prefix=$PREFIX
&lt;/code>&lt;/pre>&lt;p>&lt;strong>$PREFIX&lt;/strong>是变量在&lt;code>.bashrc&lt;/code>下申明，位置自定义推荐在&lt;code>/usr&lt;/code>下，也可以删去包括&lt;code>--&lt;/code>后面的内容
需要注意的是如果使用wsl编译则需要添加以免出现嵌套win的变量导致错误
&lt;code>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin &lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>make -j12 V=s
#12是我的pc的线程数一般是核心数x2
make install
#安装
&lt;/code>&lt;/pre></description></item><item><title>Shell脚本编写指南</title><link>https://www.omoe.cc/post/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/</link><pubDate>Wed, 09 Nov 2022 16:43:13 +0000</pubDate><guid>https://www.omoe.cc/post/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/</guid><description>&lt;h3 id="if判断实例">if判断实例&lt;/h3>
&lt;pre tabindex="0">&lt;code>if [ ! -d $变量 ];then
#command
else
fi
&lt;/code>&lt;/pre>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">-e&lt;/td>
&lt;td style="text-align:center">判断文件目录&lt;/td>
&lt;td style="text-align:center">不可和-f组合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-f&lt;/td>
&lt;td style="text-align:center">判断文件&lt;/td>
&lt;td style="text-align:center">不可和-e组合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-r&lt;/td>
&lt;td style="text-align:center">检查文件夹或者文件是否可写&lt;/td>
&lt;td style="text-align:center">可组合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-w&lt;/td>
&lt;td style="text-align:center">检查文件夹或者文件是否可写&lt;/td>
&lt;td style="text-align:center">可组合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-x&lt;/td>
&lt;td style="text-align:center">检查文件夹或者文件是否可执行&lt;/td>
&lt;td style="text-align:center">可组合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-s&lt;/td>
&lt;td style="text-align:center">检查文件长度&lt;/td>
&lt;td style="text-align:center">none&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-h&lt;/td>
&lt;td style="text-align:center">检查文件是否软链接&lt;/td>
&lt;td style="text-align:center">ln -s生成&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">-L&lt;/td>
&lt;td style="text-align:center">检查文件是否符号链接&lt;/td>
&lt;td style="text-align:center">none&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;p>&lt;strong>获取当前用户的绝对路径&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code>USE_DIR=$(pwd)
&lt;/code>&lt;/pre>&lt;p>&lt;strong>获得shell脚本所在的绝对路径&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code>#实例
CURRENT_DIR=$(cd $(dirname $0); pwd)
&lt;/code>&lt;/pre>&lt;p>or&lt;/p>
&lt;pre tabindex="0">&lt;code>#实例
CURRENT_DIR=$(cd `dirname $0`; pwd)
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>&lt;code>dirname $0&lt;/code>: 取得当前执行的脚本文件所在的目录；&lt;/li>
&lt;li>&lt;code>cd&lt;/code>: 进入当前工作目录；&lt;/li>
&lt;li>&lt;code>pwd&lt;/code>: 显示当前工作目录；
将当前工作目录输出给变量&lt;code>CURRENT_DIR&lt;/code>。
&lt;strong>获得shell脚本所在目录的父级目录的绝对路径&lt;/strong>
由于能获得shell脚本所在的绝对路径，那么同理，就可以获得脚本所在目录的父级目录的绝对路径。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>#实例
PARENT_DIR=$(cd $(dirname $0);cd ..; pwd)
&lt;/code>&lt;/pre>&lt;p>只是在pwd命令之前添加了cd ..到父级目录。
&lt;code>$()&lt;/code>与&lt;code>``&lt;/code>作用一样，用于shell命令的执行。
&lt;code>dirname&lt;/code>: 显示最后一个结点前的路径;
&lt;code>basename&lt;/code>: 显示最后一个结点的名称。
&lt;code>$0&lt;/code>: 脚本的路径名称，包含脚本本身的名称。&lt;/p>
&lt;h3 id="nodejs安装">nodejs安装&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>允许 &lt;code>sudo apt-get install -y nodejs&lt;/code> 来安装 Node.js 14.x 和 npm&lt;/li>
&lt;li>使用开发者工具箱来编译添加插件
&lt;code>sudo apt-get install gcc g++ make&lt;/code>&lt;/li>
&lt;li>使用yarn包管理器安装
&lt;code>curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg &amp;gt;/dev/null&lt;/code>&lt;/li>
&lt;li>or
&lt;code>echo &amp;quot;deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main&amp;quot; | sudo tee /etc/apt/sources.list.d/yarn.list&lt;/code>&lt;/li>
&lt;li>or
&lt;code>sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install yarn&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="tar解压">tar解压&lt;/h3>
&lt;p>压缩（-c，compress）：对文档，目录进行打包操作，并没有压缩&lt;/p>
&lt;p align="left">解压（-x，extract）：对文档，目录进行解包操作&lt;/p>
查看（-t，list）：查看压缩包或普通包里的文件名
&lt;p align="left">gzip（-z）：后缀名为.tar.gz，后缀名非硬性要求，建议这么做，下同。压缩率最低，速度快，常用&lt;/p>
bzip2（-j）：后缀名为.tar.bz2，压缩率高，速度较慢
&lt;p align="left">xz（-J）：后缀名为.tar.xz，压缩率超高，速度很慢，看情况使用&lt;/p>
&lt;p align="left">-v：在处理的时候，显示正在处理的文件名&lt;/p>
&lt;p align="left">-f：用于指定压缩后的文档名，或者是欲解压的文档名&lt;/p>
&lt;p>搭建简易git服务&lt;/p>
&lt;ul>
&lt;li>安装git(这里安装略过)&lt;/li>
&lt;li>创建用户&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo adduser git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>su git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>复制主用户的证书，后期验证使用(git用户操作)，主用户公钥&lt;code>id_rsa.pub&lt;/code>导入到.ssh/authorized_keys&lt;/li>
&lt;li>初始化用户仓库，并且更改仅限git用户。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>sudo git init --bare xxxx.git
sudo chown -R git:git xxxx.git
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>禁用shell登录(非必须)，编辑/etc/passwd&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>git:x:1001:1001:,,,:/home/git:/bin/bash
#改为
git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>使用设备远程克隆仓库&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>git clone git@ip:xxx.git
&lt;/code>&lt;/pre></description></item><item><title>Ubuntu编译openwrt</title><link>https://www.omoe.cc/post/ubuntu%E7%BC%96%E8%AF%91openwrt/</link><pubDate>Wed, 09 Nov 2022 15:19:16 +0000</pubDate><guid>https://www.omoe.cc/post/ubuntu%E7%BC%96%E8%AF%91openwrt/</guid><description>&lt;p>无论是潘多拉还是openwrt还是其他固件其底包都需要编译支持由于个人比较喜欢openwrt的高自由度所以特地列举编译固件当中遇到的报错以及问题。&lt;/p>
&lt;p>固件首先使用的是&lt;code>win10&lt;/code>的&lt;code>wsl&lt;/code>建&lt;code>ubuntu20.04&lt;/code>开始编译&lt;/p>
&lt;h3 id="本地编译">本地编译&lt;/h3>
&lt;p>添加依赖&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get update -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get install -y git &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>subversion &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>g++ &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>zlib1g-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>build-essential &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>python &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>python3 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>python3-distutils &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libncurses5-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>gawk &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>gettext &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>unzip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>file &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libssl-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libelf-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>ecj &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>fastjar &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>java-propose-classpath &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>build-essential &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>libncursesw5-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="下载源码">下载源码&lt;/h3>
&lt;p>clone&lt;a href="https://github.com/coolsnowwolf/lede.git"target="_blank" rel="noopener noreferrer">[lean]&lt;/a>
源码&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>git clone https://github.com/coolsnowwolf/lede.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="添加第三方软件包">添加第三方软件包&lt;/h3>
&lt;p>先编辑基础配置文件
&lt;strong>feeds.conf.default&lt;/strong> 这个文本类似软件包配置&lt;/p>
&lt;ul>
&lt;li>[√] kenzo是第三方基础源有想用的软件包&lt;/li>
&lt;li>[√] small是依赖包必须要添加&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;src-git kenzo https://github.com/kenzok8/openwrt-packages&amp;#34;&lt;/span> &amp;gt;&amp;gt; feeds.conf.default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;src-git small https://github.com/kenzok8/small&amp;#34;&lt;/span> &amp;gt;&amp;gt; feeds.conf.default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="第三方软件更新安装">第三方软件更新&amp;amp;安装&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>./scripts/feeds clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./scripts/feeds update -a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./scripts/feeds install -a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make menuconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>前两项的必须选好 第一项是选择cpu的类别 第二项是你的路由型号&lt;/p>
&lt;h3 id="dl包">dl包&lt;/h3>
&lt;p>&lt;del>由于国内的网络环境导致在下载所需软件包时会导致失败这里提供一个国内dl镜像
&lt;a href="https://gitee.com/tolqy/openwrt-lede-dl"target="_blank" rel="noopener noreferrer">gitee&lt;/a>
&lt;/del>&lt;/p>
&lt;h3 id="修改默认网关地址">修改默认网关地址&lt;/h3>
&lt;p>不喜欢路由器的默认地址&lt;code>192.168.1.1&lt;/code>自己修改
有多台路由时避免网关重复，这一步多设备必修改。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>vim package/base-files/files/bin/config_generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改默认wifi的选项默认wifi无密码">修改默认wifi的选项&lt;code>默认wifi无密码&lt;/code>&lt;/h3>
&lt;p>lede/package/kernel/mac80211/files/lib/wifi&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>set wireless.default_radio&lt;span style="color:#e6db74">${&lt;/span>devidx&lt;span style="color:#e6db74">}&lt;/span>.encryption&lt;span style="color:#f92672">=&lt;/span>WPA2-PSK &lt;span style="color:#75715e">#设置加密协议&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set wireless.default_radio&lt;span style="color:#e6db74">${&lt;/span>devidx&lt;span style="color:#e6db74">}&lt;/span>.key&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#75715e">#密码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>已经编译过的必须删除旧有文件&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>rm -rf build_dir/ &amp;amp;&amp;amp; rm -rf staging_dir/ &amp;amp;&amp;amp; rm -rf tmp/
&lt;/code>&lt;/pre>&lt;p>ssh连接开屏提醒&lt;/p>
&lt;pre tabindex="0">&lt;code>package/base-files/files/etc/banner
&lt;/code>&lt;/pre>&lt;h3 id="gcc版本">gcc版本&lt;/h3>
&lt;p>解决gcc版本过低网络条件不佳则可以将源换成&lt;code>https://launchpad.proxy.ustclug.org&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install software-properties-common
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo add-apt-repository ppa:ubuntu-toolchain-r/test
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install gcc-11 g++-11
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 &lt;span style="color:#ae81ff">60&lt;/span> --slave /usr/bin/g++ g++ /usr/bin/g++-11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="wsl编译最后一步编译必须添加前置">wsl编译最后一步编译必须添加前置&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>PATH&lt;span style="color:#f92672">=&lt;/span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="编译">编译&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>make download -j12
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make -j8 V&lt;span style="color:#f92672">=&lt;/span>s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>特别提醒 国内特殊的网络条件下在使用&lt;code>make download&lt;/code>下载依赖包时建议挂上全局避免直接404导致后面编译报error
编译好的固件在/lede/bin/targets/xxx下&lt;/p>
&lt;h3 id="二次编译">二次编译&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>./scripts/feeds update -a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./scripts/feeds install -a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> make defconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> make -j12 download
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> make -j8 V&lt;span style="color:#f92672">=&lt;/span>s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>第三方编译软件包 &lt;a href="https://github.com/OpenWrt-Actions/lienol-openwrt-package"target="_blank" rel="noopener noreferrer">[Lienol/openwrt备份]&lt;/a>
&lt;/strong>&lt;/p>
&lt;p>&lt;strong>官方原版 &lt;a href="https://github.com/openwrt/openwrt"target="_blank" rel="noopener noreferrer">[openwrt]&lt;/a>
&lt;/strong>&lt;/p>
&lt;p>&lt;strong>第三方固件地址国内镜像&lt;a href="https://gitee.com/qmgta/lede"target="_blank" rel="noopener noreferrer">[gitee]&lt;/a>
&lt;/strong>&lt;/p>
&lt;p>&lt;strong>利用CI自动构建项目 &lt;a href="https://github.com/kenzok8/openwrt_Build"target="_blank" rel="noopener noreferrer">[openwrt_Build]&lt;/a>
&lt;/strong>&lt;/p>
&lt;p>&lt;strong>自定义wifi &lt;a href="http://www.5lazy.cn/post-147.html"target="_blank" rel="noopener noreferrer">源码修改&lt;/a>
&lt;/strong>&lt;/p></description></item><item><title>主题配置</title><link>https://www.omoe.cc/post/%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</link><pubDate>Wed, 09 Nov 2022 09:10:25 +0000</pubDate><guid>https://www.omoe.cc/post/%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</guid><description>&lt;p>主题简约没有代码复制 自定义添加&lt;/p>
&lt;p>博客目录下&lt;code>static/css&lt;/code>添加&lt;code>copy-to-clipboard.css&lt;/code>内容&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">highlight&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">position&lt;/span>: &lt;span style="color:#66d9ef">relative&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">highlight&lt;/span> &lt;span style="color:#f92672">pre&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">padding-right&lt;/span>: &lt;span style="color:#ae81ff">10&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">background-color&lt;/span>:&lt;span style="color:#ae81ff">#f8f8f8&lt;/span> &lt;span style="color:#75715e">!important&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">highlight&lt;/span> &lt;span style="color:#f92672">td&lt;/span>:&lt;span style="color:#a6e22e">first-child&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">user-select&lt;/span>: &lt;span style="color:#66d9ef">none&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">highlight-copy-btn&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">position&lt;/span>: &lt;span style="color:#66d9ef">absolute&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">top&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">right&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">border&lt;/span>: &lt;span style="color:#66d9ef">none&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">border-radius&lt;/span>: &lt;span style="color:#ae81ff">8&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">padding&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">font-size&lt;/span>: &lt;span style="color:#ae81ff">0.5&lt;/span>&lt;span style="color:#66d9ef">em&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">line-height&lt;/span>: &lt;span style="color:#ae81ff">1.8&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#ae81ff">#fff&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">background-color&lt;/span>: &lt;span style="color:#ae81ff">#888&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">min-width&lt;/span>: &lt;span style="color:#ae81ff">55&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">text-align&lt;/span>: &lt;span style="color:#66d9ef">center&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">z-index&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">transition&lt;/span>: &lt;span style="color:#ae81ff">.1&lt;/span>&lt;span style="color:#66d9ef">s&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">margin&lt;/span>: &lt;span style="color:#ae81ff">10&lt;/span>&lt;span style="color:#66d9ef">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">opacity&lt;/span>: &lt;span style="color:#ae81ff">0.5&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">highlight-copy-btn&lt;/span>:&lt;span style="color:#a6e22e">hover&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">background-color&lt;/span>: &lt;span style="color:#ae81ff">#666&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在&lt;code>static/js&lt;/code>下添加&lt;code>copy-to-clipboard.js&lt;/code>内容&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-JavaScript" data-lang="JavaScript">&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#66d9ef">function&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;use strict&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span>(&lt;span style="color:#f92672">!&lt;/span>document.&lt;span style="color:#a6e22e">queryCommandSupported&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;copy&amp;#39;&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">flashCopyMessage&lt;/span>(&lt;span style="color:#a6e22e">el&lt;/span>, &lt;span style="color:#a6e22e">msg&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">el&lt;/span>.&lt;span style="color:#a6e22e">textContent&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">msg&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">setTimeout&lt;/span>(&lt;span style="color:#66d9ef">function&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">el&lt;/span>.&lt;span style="color:#a6e22e">textContent&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Copy&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }, &lt;span style="color:#ae81ff">1000&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">selectText&lt;/span>(&lt;span style="color:#a6e22e">node&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">selection&lt;/span> &lt;span style="color:#f92672">=&lt;/span> window.&lt;span style="color:#a6e22e">getSelection&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">range&lt;/span> &lt;span style="color:#f92672">=&lt;/span> document.&lt;span style="color:#a6e22e">createRange&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">range&lt;/span>.&lt;span style="color:#a6e22e">selectNodeContents&lt;/span>(&lt;span style="color:#a6e22e">node&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">selection&lt;/span>.&lt;span style="color:#a6e22e">removeAllRanges&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">selection&lt;/span>.&lt;span style="color:#a6e22e">addRange&lt;/span>(&lt;span style="color:#a6e22e">range&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">selection&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">addCopyButton&lt;/span>(&lt;span style="color:#a6e22e">containerEl&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">copyBtn&lt;/span> &lt;span style="color:#f92672">=&lt;/span> document.&lt;span style="color:#a6e22e">createElement&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;button&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">copyBtn&lt;/span>.&lt;span style="color:#a6e22e">className&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;highlight-copy-btn&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">copyBtn&lt;/span>.&lt;span style="color:#a6e22e">textContent&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Copy&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">codeEl&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">containerEl&lt;/span>.&lt;span style="color:#a6e22e">firstElementChild&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">copyBtn&lt;/span>.&lt;span style="color:#a6e22e">addEventListener&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;click&amp;#39;&lt;/span>, &lt;span style="color:#66d9ef">function&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">selection&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">selectText&lt;/span>(&lt;span style="color:#a6e22e">codeEl&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> document.&lt;span style="color:#a6e22e">execCommand&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;copy&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">selection&lt;/span>.&lt;span style="color:#a6e22e">removeAllRanges&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flashCopyMessage&lt;/span>(&lt;span style="color:#a6e22e">copyBtn&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Copied!&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span>(&lt;span style="color:#a6e22e">e&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#a6e22e">e&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flashCopyMessage&lt;/span>(&lt;span style="color:#a6e22e">copyBtn&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Failed :\&amp;#39;(&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">containerEl&lt;/span>.&lt;span style="color:#a6e22e">appendChild&lt;/span>(&lt;span style="color:#a6e22e">copyBtn&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Add copy button to code blocks
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">highlightBlocks&lt;/span> &lt;span style="color:#f92672">=&lt;/span> document.&lt;span style="color:#a6e22e">getElementsByClassName&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;highlight&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Array.&lt;span style="color:#a6e22e">prototype&lt;/span>.&lt;span style="color:#a6e22e">forEach&lt;/span>.&lt;span style="color:#a6e22e">call&lt;/span>(&lt;span style="color:#a6e22e">highlightBlocks&lt;/span>, &lt;span style="color:#a6e22e">addCopyButton&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>})();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://www.omoe.cc/archives/</link><pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate><guid>https://www.omoe.cc/archives/</guid><description/></item><item><title>About</title><link>https://www.omoe.cc/about/</link><pubDate>Thu, 28 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.omoe.cc/about/</guid><description>&lt;p>&lt;img src="https://s2.loli.net/2022/11/09/V5wivk6ruQCzFNA.png"
alt="fc7e470388551aec50812bd3cbcc4ed1"/>&lt;/p></description></item></channel></rss>