<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.140.2"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Node邮件发送&nbsp;&ndash;&nbsp;拾集</title><link rel=stylesheet href=/css/core.min.1ac09430cb73cb10e4e8675a00860a85fd942690ba93348295ae6a4cc113badfeb6c30ab7527e6b42511a7163c630af5.css integrity=sha384-GsCUMMtzyxDk6GdaAIYKhf2UJpC6kzSCla5qTMETut/rbDCrdSfmtCURpxY8Ywr1><meta name=twitter:card content="summary">
<meta name=twitter:title content="Node邮件发送"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><img class="site logo" src=/images/avatar.png alt><span class="site name">拾集</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories/>分类</a><a class="nav item" href=/tags/>标签</a><a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Node邮件发送</h1><p class="article date">2022-12-02<span class=lastmod> • 更新于 2023-09-21</span><span class=reading-time> • 预计阅读时间 2 分钟</span></p></section><article class="article markdown-body"><p>node相关</p><pre tabindex=0><code>npm install nodemailer --save
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 这里举简单例子，也可以封装成service来调用
</span></span></span><span class=line><span class=cl><span class=c1>// 引入nodemailer
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>nodemailer</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;nodemailer&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 封装发送者信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>transporter</span> <span class=o>=</span> <span class=nx>nodemailer</span><span class=p>.</span><span class=nx>createTransport</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;smtp.qq.com&#39;</span><span class=p>,</span> <span class=c1>// 调用qq服务器
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>secureConnection</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// 启动SSL
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>port</span><span class=o>:</span> <span class=mi>465</span><span class=p>,</span> <span class=c1>// 端口就是465
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>auth</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=s1>&#39;mrcdh@qq.com&#39;</span><span class=p>,</span> <span class=c1>// 账号
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>pass</span><span class=o>:</span> <span class=s1>&#39;xxxxxxxxxx&#39;</span><span class=p>,</span> <span class=c1>// 授权码,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 邮件参数及内容
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>mailOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>from</span><span class=o>:</span> <span class=s1>&#39;mrcdh@qq.com&#39;</span><span class=p>,</span> <span class=c1>// 发送者,与上面的user一致
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 可以指定发送者的名字，和发送邮箱用空格隔开
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//from: &#39;mrcdh mrcdh@qq.com&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>to</span><span class=o>:</span> <span class=s1>&#39;xxxx@xxx.com&#39;</span><span class=p>,</span> <span class=c1>// 接收者,可以同时发送多个,以逗号隔开
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>subject</span><span class=o>:</span> <span class=s1>&#39;测试的邮件&#39;</span><span class=p>,</span> <span class=c1>// 标题
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// text: &#39;测试内容&#39;, // 文本
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>html</span><span class=o>:</span> <span class=s1>&#39;&lt;h2&gt;测试一下:&lt;/h2&gt;&lt;a href=&#34;https://baidu.com&#34;&gt;测试链接&lt;/a&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 调用函数，发送邮件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>await</span> <span class=nx>transporter</span><span class=p>.</span><span class=nx>sendMail</span><span class=p>(</span><span class=nx>mailOptions</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>info</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>info</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><hr><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mailOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>from</span><span class=o>:</span><span class=s1>&#39;mrcdh@qq.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>to</span><span class=o>:</span> <span class=s1>&#39;xxxxxxxxx@163.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>subject</span><span class=o>:</span> <span class=s1>&#39;hello&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>html</span><span class=o>:</span> <span class=s2>&#34;&lt;img src=&#39;cid:01&#39; style=&#39;width:200px;height:auto&#39;&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>attachments</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;好歌.mp3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;path&#34;</span><span class=o>:</span><span class=s2>&#34;./haoge.mp3&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;test.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;content&#34;</span><span class=o>:</span><span class=s2>&#34;测试可写的文件&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;test.JPG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;path&#34;</span><span class=o>:</span><span class=s2>&#34;./test.JPG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cid&#34;</span><span class=o>:</span><span class=s2>&#34;01&#34;</span>    <span class=c1>// 插在邮件正文中的图片
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><hr><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mailOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>from</span><span class=o>:</span><span class=s1>&#39;mrcdh@qq.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>to</span><span class=o>:</span> <span class=s1>&#39;xxxxxxxxx@163.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>subject</span><span class=o>:</span> <span class=s1>&#39;hello&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>html</span><span class=o>:</span> <span class=s2>&#34;&lt;img src=&#39;cid:01&#39; style=&#39;width:200px;height:auto&#39;&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>attachments</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;好歌.mp3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;path&#34;</span><span class=o>:</span><span class=s2>&#34;./haoge.mp3&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;test.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;content&#34;</span><span class=o>:</span><span class=s2>&#34;测试可写的文件&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filename&#34;</span><span class=o>:</span><span class=s2>&#34;test.JPG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;path&#34;</span><span class=o>:</span><span class=s2>&#34;./test.JPG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cid&#34;</span><span class=o>:</span><span class=s2>&#34;01&#34;</span>    <span class=c1>// 插在邮件正文中的图片
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></article><section class="article labels"><a class=category href=/categories/node/>node</a><a class=tag href=/tags/></a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/posts/gradle%E4%B8%8B%E8%BD%BD%E9%BE%9F%E9%80%9F%E9%97%AE%E9%A2%98/><span class="iconfont icon-article"></span>Gradle下载龟速问题</a></p><p><a class=link href=/posts/npm%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B/><span class="iconfont icon-article"></span>Npm安装以及使用流程</a></p></section><section class="article discussion"><script src=https://utteranc.es/client.js repo=Hipye/morris issue-term=pathname label theme=github-light crossorigin=anonymous async></script></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>©2019 Moriz.</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank rel="noopener noreferrer">Notepadium</a></p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=/js/hljs.min.8a2658ccca6d9e87a439ee65a5d1d1e166af57afdffd06d778243afc50968a2e8188303a6368ca04f679dd21a49af5bf.js integrity=sha384-iiZYzMptnoekOe5lpdHR4WavV6/f/QbXeCQ6/FCWii6BiDA6Y2jKBPZ53SGkmvW/></script><script>hljs.initHighlightingOnLoad()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XXXXXXXXXX")}</script><script src=/js/core.min.59672cc6ef0b6dd700d9fbd511a1202d5648b213c471b63b61fe2e855804cba87304a1345291871027371812b3636753.js integrity=sha384-WWcsxu8LbdcA2fvVEaEgLVZIshPEcbY7Yf4uhVgEy6hzBKE0UpGHECc3GBKzY2dT></script></body></html>