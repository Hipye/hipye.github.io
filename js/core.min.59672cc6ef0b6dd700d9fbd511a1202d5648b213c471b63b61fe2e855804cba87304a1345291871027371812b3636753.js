(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.textContent=t,setTimeout(function(){e.textContent="Copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn",s.textContent="复制",o=n.querySelector("pre"),o||(o=n.firstElementChild),s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),s.classList.remove("copy-fail"),s.classList.add("copy-success"),e(s,"已复制")}catch(t){console&&console.log(t),s.classList.remove("copy-success"),s.classList.add("copy-fail"),e(s,"复制失败")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})();let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),document.querySelectorAll(".inner ul li a").forEach(e=>{e.addEventListener("mouseenter",()=>{e.classList.add("hover")}),e.addEventListener("mouseleave",()=>{e.classList.remove("hover")})}),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);function checkTocPosition(){const e=document.body.scrollWidth;e>1012?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}document.addEventListener("DOMContentLoaded",function(){if(window.location.pathname.includes("/posts/")){const e=document.createElement("button");e.className="back-to-top",e.textContent="返回顶部",document.body.appendChild(e),window.addEventListener("scroll",function(){window.scrollY>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}})