<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.111.1"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=google-site-verification content="AsHOUXvrnOA93vxhoMbbXs5tMB7_Hs1_iDtR9d6LYiI"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><link rel=bookmark type=image/x-icon href=images/avatar.png><link rel=icon type=image/x-icon href=images/avatar.png><link rel="shortcut icon" type=image/x-icon href=images/avatar.png><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109916879-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-109916879-1")</script><title>FishShell基础配置指南&nbsp;&ndash;&nbsp;拾集</title><link rel=stylesheet href=/css/core.min.9ff7e9cf576fc82e3a413b6047706e8d3305066d9b901cf82f1dbbca7ed0f88eb4cf96500697f2fc8195eddeb5be64d9.css integrity=sha384-n/fpz1dvyC46QTtgR3BujTMFBm2bkBz4Lx27yn7Q+I60z5ZQBpfy/IGV7d61vmTZ><meta name=twitter:card content="summary"><meta name=twitter:title content="FishShell基础配置指南"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">拾集</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/archives/>归档 </a><a class="nav item" href=/categories/>分类 </a><a class="nav item" href=/tags/>标签</a>
<a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">FishShell基础配置指南</h1><p class="article date">2022-11-11
<span class=wordcount>&nbsp;•&nbsp;共&nbsp;4311&nbsp;个字</span><span class=reading-time> • 预计阅读时间 9 分钟</span></p></section><aside id=toc-container class="toc-container wide"><div class=toc><h3>文章目录</h3><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e5%b8%ae%e5%8a%a9 aria-label=帮助>帮助</a></li><li><a href=#%e9%a2%9c%e8%89%b2%e6%8f%90%e7%a4%ba aria-label=颜色提示>颜色提示</a></li><li><a href=#%e9%80%9a%e9%85%8d%e7%ac%a6 aria-label=通配符>通配符</a></li><li><a href=#%e7%ae%a1%e9%81%93%e5%92%8c%e9%87%8d%e5%ae%9a%e5%90%91 aria-label=管道和重定向>管道和重定向</a></li><li><a href=#%e8%87%aa%e5%8a%a8%e5%ae%8c%e6%88%90%e8%af%8d%e8%af%ad aria-label=自动完成词语>自动完成词语</a></li><li><a href=#%e7%9b%ae%e5%bd%95%e6%93%8d%e4%bd%9c aria-label=目录操作>目录操作</a></li><li><a href=#%e8%84%9a%e6%9c%ac%e7%bc%96%e7%a8%8b aria-label=脚本编程>脚本编程</a><ul><li><a href=#%e5%8f%98%e9%87%8f aria-label=变量>变量</a></li></ul></li><li><a href=#%e6%89%a7%e8%a1%8c%e5%91%bd%e4%bb%a4 aria-label=执行命令>执行命令</a></li><li><a href=#%e6%8e%a7%e5%88%b6%e6%b5%81%e7%a8%8b aria-label=控制流程>控制流程</a><ul><li><a href=#%e5%88%a4%e6%96%ad%e8%af%ad%e5%8f%a5 aria-label=判断语句>判断语句</a></li><li><a href=#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5 aria-label=循环语句>循环语句</a></li><li><a href=#%e5%87%bd%e6%95%b0 aria-label=函数>函数</a><ul><li><a href=#%e5%8f%82%e6%95%b0 aria-label=参数>参数</a></li><li><a href=#%e4%ba%8b%e4%bb%b6 aria-label=事件>事件</a></li></ul></li></ul></li><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%a4%84%e7%90%86 aria-label=字符串处理>字符串处理</a></li><li><a href=#%e5%86%85%e7%bd%ae%e5%87%bd%e6%95%b0 aria-label=内置函数>内置函数</a></li></ul></div></div></aside><article class="article markdown-body"><div><h3 id=前言>前言</h3><p>fish和bash脚本解释不一样，不能单纯copy<code>.bashrc</code>所有的配置都需要修改。</p><h3 id=帮助>帮助</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>man</span> set
</span></span></code></pre></div><h3 id=颜色提示>颜色提示</h3><p>存在时文字蓝色，不存在时红色。</p><h3 id=通配符>通配符</h3><ul><li><code>*</code>: 匹配文件名的全部或者一部分</li><li><code>**</code>: 匹配当前目录下的所有路径的全部或一部分</li></ul><h3 id=管道和重定向>管道和重定向</h3><ul><li><code>|</code>： 左命令通过标准输出(/dev/stdout)重定向到右命令的标准输入(/dev/stdin)</li><li><code>></code>、<code>&lt;</code>： 重定向输出到右侧文件、读取右侧文件。<code>></code>左侧默认是命令的标准输出，<code>2></code>指定标准错误输出(/dev/stderr)。<code>>&amp;1</code>表示输出到标准输出。</li></ul><h3 id=自动完成词语>自动完成词语</h3><ul><li>当你敲击命令时，fish 会提示补充完整的词，在出现提示词时，按 ctrl + f 完成单词（或按 -> 右箭头)。局部完成：alt + -></li><li>tab 键激活提示，包括命令、参数、路径。</li></ul><h3 id=目录操作>目录操作</h3><ul><li>atl + 左右箭头： 进入上一个目录或下一个目录</li></ul><h3 id=脚本编程>脚本编程</h3><h4 id=变量>变量</h4><ul><li><code>$变量名</code>: 读取变量值</li><li><code>set 变量名 变量值</code>: 设置变量值
双引号内可以使用变量，单引号内不能。他们都代表字符串。</li><li><code>set -e 变量名</code>： 撤销变量</li><li><code>set -x 变量名 变量值</code>： 设置导出变量。即子脚本可以读取的变量。</li><li><code>set -u 变量名</code>： 撤销导出变量
变量是一个列表，<code>set a $a b</code> 往 $a 添加新的列表项 b</li><li><code>count $a</code>: 列表长度</li><li><code>$a[1]</code>: 列表第 1 项，<code>$a[-1]</code>: 列表末尾项</li><li><code>$a[1..2]</code>: 列表的第 1 项到第 2 项（包括）的范围切片</li><li><code>$a"x"$a</code>: 列表将和相连的内容计算笛卡尔积，如$a = 1 2 3，那么结果是：1x1 2x1 3x1 1x2 2x2 3x2 1x3 2x3 3x3。当在双引号内不会计算。</li><li><code>set -g 变量名 变量值</code>： 设置全局变量，即当前脚本有效</li><li><code>set -l 变量名 变量值</code>： 设置局部变量</li><li><code>set -U 变量名 变量值</code>： 设置通用变量，在所有 fish 脚本内有效</li><li><code>string join \n $变量</code>： 变量转化为字符串，通常是用空格连接，string join 命令可以指定连接的字符(\n 即换行)。</li></ul><h3 id=执行命令>执行命令</h3><ul><li><code>(命令)</code>: 执行括号内的命令，输出作为参数内容插入，如 <code>echo (uname)</code> 等价于 <code>echo Linux</code></li><li><code>set a (命令|string split0)</code>: 命令替换通常会根据换行来建立变量的多个表项，用 <code>string split0</code> 根据空字符划分表项，即最多只有一个项。</li><li><code>命令;命令</code>： 在同一行可以用分号并列两个命令</li><li><code>$status</code>: 上一个命令的返回值，0 为成功，非 0 为失败</li><li><code>&&</code>、<code>||</code>、<code>!</code>、<code>and</code>、<code>or</code>、<code>not</code> ： 与，或，非，如 <code>true && false</code> 根据上一个命令(true)执行状态执行下一个命令(false)。与，是上个命令成功，执行下个命令，两个命令都成功，结果成功。或，是上个命令失败，执行下个命令，其中一个成功，结果成功。非，只有一个命令，如果成功，结果失败，如果失败，结果成功。and 等版本作用于上一条语句（而不是同一行的命令）。</li><li>数字运算： 例 <code>math -s0 1+1</code>，math 函数支持整数和小数的加(+)、减(-)、乘(x)、除(/)、幂（^）、模(%)等数学运算。<code>-s0</code>保留 0 位小数，即保留整数。</li><li><code>begin ... end</code>: 包含在 begin 和 end 间的语句，形成一个是局部段落，可以设置局部变量，可以将内部语句的输出一起重定向。</li><li><code>builtin 命令</code>：强制使用内部命令，而不使用同名的自定义函数</li><li><code>command 命令</code>：调用外部命令，而不使用内部命令和自定义函数</li><li><code>eval "命令"</code>： 将参数转化为命令执行</li><li><code>exec 命令</code>： 以指定命令替换掉当前的shell，当前shell关闭，即该命令永不返回。</li><li><code>命令 (命令 | psub)</code>： 进程替换。命令替换和管道的结合，和普通命令替换的区别是最终以命名管道（文件）的方式作为参数输入，而不是文本</li></ul><h3 id=控制流程>控制流程</h3><p>程序是从上往下一次执行的，但是，如果只是顺序执行，程序就缺乏对环境变化的理解，因此任何成熟的程序语言，都带有控制流程的语句。如，判断语句，循环语句，函数等。</p><h4 id=判断语句>判断语句</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># 将 false 替换条件语句
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=k>false</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=k>false</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><p>if &mldr; else &mldr; end 语句段可以添加多个 else if 判断条件 ，条件成立时执行if 和 else 之间的语句，条件不成立时，执行 else 和 end 之间的语句。也可以省略 else 段。</p><p>命令执行有成功和失败，它就是一个条件语句。</p><p>同时，fish 使用 test 命令来提供强大的判断能力。如：<code>test "$number" -gt 5</code>，判断变量 number 是否大于(-gt) 5。</p><p>数字判断：</p><ul><li>-gt: ></li><li>-lt: &lt;</li><li>-ge: >=</li><li>-le: &lt;=</li><li>-eq: =</li><li>-ne: !=</li></ul><p>文件判断：</p><ul><li>-b：设备文件</li><li>-c: 字符设备</li><li>-d： 目录</li><li>-e： 文件存在</li><li>-f: 常规文件</li><li>-g: 文件设置了组id</li><li>-G: 文件属于当前用户的组</li><li>-k：文件设置了粘滞位</li><li>-L: 符号链接文件</li><li>-O： 文件属于当前用户</li><li>-p： 管道文件</li><li>-r： 可读</li><li>-w： 可写</li><li>-x： 可执行</li><li>-s： 非零文件</li><li>-S： 套接字文件</li><li>-t： 终端</li><li>-u： 设置用户位</li></ul><p>字符串判断：</p><ul><li>=: 两字符串是否相等</li><li>!=: 两字符串是否不等</li><li>-n: 非空字符串</li><li>-z: 空字符串</li></ul><p>条件组合：</p><ul><li>-a: and</li><li>-o: or</li><li>!: !</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># 选项分支
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>switch</span> <span class=nv>$a</span>
</span></span><span class=line><span class=cl><span class=k>case</span> a
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s1>&#39;$a == a&#39;</span>
</span></span><span class=line><span class=cl><span class=k>case</span> b
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s1>&#39;$a == b&#39;</span>
</span></span><span class=line><span class=cl><span class=k>case</span> c d
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s1>&#39;$a == c || $a == d&#39;</span>
</span></span><span class=line><span class=cl><span class=k>case</span> <span class=s1>&#39;*&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s1>&#39;其他，默认选项&#39;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><p>switch &mldr;case 语句，根据内容的值（$a）是否等于选项（case）来控制分支。</p><h4 id=循环语句>循环语句</h4><p>循环语句根据条件是否成立，重复的执行循环内部的代码。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># 死循环，不停的输出 loop
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>while</span> <span class=k>true</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;loop&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># *.txt 匹配当前目录下的所有txt后缀的文件，组成一个列表
</span></span></span><span class=line><span class=cl><span class=c># for file in ... 依次读取列表中的一项，保存到 $file
</span></span></span><span class=line><span class=cl><span class=c># more $file 显示当前文件内容
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>for</span> <span class=nv>file</span> <span class=k>in</span> *.txt
</span></span><span class=line><span class=cl>    <span class=nf>more</span> <span class=nv>$file</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><h4 id=函数>函数</h4><p>当遇到函数调用时，从当前流程跳转到函数内部执行。函数的作用等于将代码分割成若干功能的小片段。函数能够接受参数，并且能够返回值，很像数学上的函数概念，因此得名。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># 函数 say
</span></span></span><span class=line><span class=cl><span class=c># 参数 argv
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>say</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> hello <span class=nv>$argv</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>###  使用函数
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>say</span> jim <span class=c># 输出 hello jim
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=nv>$status</span> <span class=c># 返回值输出 0
</span></span></span></code></pre></div><p>定义了一个函数，就可以随意调用了。之后想获得该函数的信息：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nb>functions </span>say <span class=c># 输出该函数的定义
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=nb>functions</span> <span class=c># 输出所有已经定义的函数名
</span></span></span></code></pre></div><h5 id=参数>参数</h5><p>函数和脚本，都可以接受参数，对参数格式的处理，可以用 argparse 函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=k>function</span> <span class=nf>say</span>
</span></span><span class=line><span class=cl><span class=c># 支持参数 -h --help -n -name -s --sooo
</span></span></span><span class=line><span class=cl><span class=c># 其中 -n jim --name ming 可以多次输入参数
</span></span></span><span class=line><span class=cl><span class=c># -s9 -9 --sooo=9 都是有效参数
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=nb>argparse</span> <span class=na>--name</span><span class=o>=</span>myfunc <span class=s1>&#39;h/help&#39;</span> <span class=s1>&#39;n/name=+&#39;</span> <span class=s1>&#39;s#sooo&#39;</span> <span class=na>--$argv</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_h</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s1>&#39;say -n yourname&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s1>&#39;say -h help&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s1>&#39;say -9&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_n</span>
</span></span><span class=line><span class=cl>        <span class=k>set</span> <span class=na>-l</span> <span class=nv>once</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=na>-n</span> <span class=s1>&#39;hello &#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nv>var</span> <span class=k>in</span> <span class=nv>$_flag_n</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=k>test</span> <span class=nv>$once</span> <span class=na>-eq</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>                <span class=k>echo</span> <span class=na>-n</span> <span class=s1>&#39;,&#39;</span>
</span></span><span class=line><span class=cl>            <span class=k>end</span>
</span></span><span class=line><span class=cl>            <span class=k>set</span> <span class=nv>once</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>            <span class=k>echo</span> <span class=na>-n</span> <span class=nv>$var</span>
</span></span><span class=line><span class=cl>        <span class=k>end</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s1>&#39;!&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_s</span>
</span></span><span class=line><span class=cl>        <span class=k>set</span> <span class=na>-l</span> <span class=nv>i</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=na>-n</span> <span class=s2>&#34;I&#39;m S&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=k>test</span> <span class=nv>$i</span> <span class=na>-le</span> <span class=nv>$_flag_s</span>
</span></span><span class=line><span class=cl>            <span class=k>echo</span> <span class=na>-n</span> <span class=s1>&#39;o&#39;</span>
</span></span><span class=line><span class=cl>            <span class=k>set</span> <span class=nv>i</span> <span class=o>(</span><span class=nb>math</span> <span class=nv>$i</span>+<span class=m>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=k>end</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s1>&#39; happy!&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># 使用例子
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>say</span> -<span class=m>99</span> <span class=na>--name</span> htqx <span class=na>-n</span> xiaoming <span class=na>-h</span>
</span></span></code></pre></div><h5 id=事件>事件</h5><p>函数可以处理事件。即当事件产生时，将自动调用函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># 处理事件
</span></span></span><span class=line><span class=cl><span class=c># --on-event 表示要处理的事件
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>event_say</span> <span class=na>--on-event</span> say_event
</span></span><span class=line><span class=cl>    <span class=k>echo</span> poker face:<span class=s2>&#34;</span><span class=nv>$argv</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>say</span>
</span></span><span class=line><span class=cl>    <span class=c># 引发事件
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=nb>emit </span>say_event hello,<span class=nv>$argv</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><h3 id=字符串处理>字符串处理</h3><p>脚本编程的一个大对象，就是针对字符串（文本）的处理。</p><p>string 命令：</p><ul><li>collect: 不拆分多行字符串，-N 不修剪多余的换行
<code>echo a\nb\nc | string collect -N</code></li><li>escape: 转义字符串。 -n 不带引号
&ndash;type=: var 变量转义，url 网址转义，regex 正则转义
<code>echo "a\nb\nc" | escape ...</code> 分别输出：var: a_5C_nb_5C_nc; url:a%5Cnb%5Cnc; regex:<code>a\\nb\\nc</code></li><li>unescape：转义还原。 &ndash;type=var,url</li><li>join：联接字符串，指定联接符
<code>echo a\nb\nc | string jion ' '</code>：输出 a b c</li><li>join0:联接字符串
<code>echo a\nb\nc | string jion0</code>：输出abc</li><li>split:拆分字符串，指定字符结尾。-r 从右到左，-n 过滤空串，-m 最多拆分次数，-f 指定列。</li><li>split0:拆分字符串，拆分符 \0 （但不要使用 split \0 代替）。</li><li>length：长度，-q 只判断</li><li>lower：小写, -q 只判断</li><li>upper：大写，-q 只判断</li><li>pad：填充。-r 右侧填充，-c 填充字符，-w 总宽度。
<code>echo ab\nc |string pad -c x</code></li><li>repeat：重复字符串。-n 重复次数，-m 最大字数，-N 最后不换行。</li><li>replace：替换匹配内容。用 $1 捕获相应组。</li><li>trim：修剪空格，-l 左空格，-r 右空格，-c 修剪符。</li><li>sub： 字串。-s 开始位置，-e 结束位置，-l 长度。</li><li>match：多组字符串进行匹配，默认是完全匹配某一项才输出对应项。<ol><li>-a：全部测试匹配性，而不是匹配一个就结束</li><li>-e: 某一项匹配一部分，输出整个项。</li><li>-i：忽略大小写</li><li>-n：输出匹配项的匹配位置的范围，如输出：1 6</li><li>-r：正则匹配，输出匹配的部分,而不是整项。正则支持 perl 模式。</li><li>-v：反转匹配</li></ol></li></ul><h3 id=内置函数>内置函数</h3><ul><li><code>abbr -ag ll ls -l</code>: 将 ls -l 用 ll 缩写代替</li><li><code>alias ll="ls -l"</code>： 用 ll 函数包装 ls -l</li><li>argparse: 对参数文本进行解析，包括三部分，选项，规范，参数。<ol><li>-n： 函数名（用于错误输出）</li><li>-x： 独占</li><li>-N： 最小参数个数</li><li>-X： 最大参数个数</li><li>-i： 忽略未知参数</li><li>-s： 遇到未知参数立即停止</li><li>规范：从参数中搜索，找到并生成规范对应的局部变量_flag_x。<ol><li>&rsquo;n/name&rsquo;: 生成局部变量_flag_n 和 _flag_name，能处理选项 -n 和 &ndash;name</li><li>&rsquo;n/name=&rsquo;: 接受选项值，如 -n9 和 &ndash;name 9 和 &ndash;name=9</li><li>&rsquo;n/name=?&rsquo;: 选项值可选</li><li>‘n/name=+&rsquo;: 可多次使用选项，保存多个值</li><li><code>'n#max'</code>: -99 等</li><li>&rsquo;n/name=!验证函数`：对参数值进行验证<ol><li>_argparse_cmd : 被验证的函数名</li><li>_flag_name: 当前验证的选项</li><li>_flag_value: 当前参数值</li></ol></li></ol></li></ol></li><li>bg、fg、jobs、disown： 任务放后台、转到前台、任务状态、分离任务</li><li>bind：快捷键绑定，ctrl(\c),alt(Meta),esc(\e)等</li><li>block：屏蔽事件</li><li>breakpoint: 调试断点</li><li><code>cd</code> 改变目录、<code>cdh</code> 通过最近访问目录列表改变目录、<code>dirh</code> 目录记录、<code>prevd</code> 上一个目录、<code>netxd</code> 下一个目录、<code>pushd</code> 入栈当前目录并进去指定目录、<code>popd</code> 出栈目录、<code>pwd</code> 显示当前目录</li><li>complete： 定义自动完成词（补全）<ol><li>-c / -p: 命令或者路径，没有其他参数时返回当前补全定义</li><li>-s / -l: 短选项和长选项</li><li>-a: 参数</li><li>-F / -f: 文件名参数 或 非文件名</li><li>-r： 需要参数</li><li>-w： 别名</li><li>-n ： 判断条件</li><li>-C ： 搜索相关补全</li><li>-d ： 说明描述</li><li>-e ： 删除补全</li><li>-x : -r -f 的组合</li></ol></li><li><code>contains key I have key</code>：查询列表中（I have key）是否包含指定项（key）</li><li>count: 列表（即变量）的项总数</li><li>exit: 退出当前 shell</li><li>fish_add_path: 添加搜索路径，即 $PATH</li><li>fish_config: 启动 fish 配置网页</li><li>fish_is_root_user: 检查当前用户是否 root</li><li>fish_key_reader: 交互式输出按键的 bind 绑定形式</li><li>fish_update_completions: 解析系统自带的补全</li><li>funcsave: 保存自定义函数 ~/.config/fish/functions/xxx.fish</li><li>isatty: 文件描述符是否终端</li><li>open: 类似 xdg-open ，用关联的程序打开不同类型的文件</li><li>printf： 打印格式化文本<ol><li>%d、%s：数字、文本</li><li>%o、%x：八进制、十六进制</li><li>%f、%g、%e: 六位小数浮点、浮点、科学计数</li></ol></li><li><code>echo -n -e “a\nb”</code>： 输出文本，-n 结束不换行，-e 识别转义(\n)</li><li>random: 0~32767 的随机数</li><li>read : 读取用户输入<ol><li>-g、-l、-u、-x、-U：存储的变量的范围
2〔方案選單〕 . -d、-t、-a、-L：指定分隔符、按toke、列表、多行列表</li><li>-s、-S：密码模式、语法高亮</li><li>-n、-z：行标记、空字符行标记</li></ol></li><li><code>realpath -s txt</code>：将相对路径转换为绝对路径，-s 保留符号链接文件</li><li>set：显示和设置变量，变量是列表，可以多个值<ol><li>-a、-p：添加值到末尾、添加到头部</li><li>-l：局部变量（可屏蔽更大范围的同名变量）</li><li>-g：全局变量</li><li>-U: 通用变量（多个 fish shell 共享）</li><li>-x：导出变量（环境变量）</li><li>-u：取消导出</li><li>&ndash;path：路径变量（以:分隔列表项，而不是空格）</li><li>&ndash;unpath：取消路径模式</li><li>-e：取消变量</li><li>-q: 判断是否定义了变量</li><li>-n：所有已经定义的变量名的列表</li><li>-S: 显示变量的定义信息</li><li><code>变量[2]</code>:可以使用下标对变量的表项进行操作</li></ol></li><li>set_color:设置颜色<ol><li>-b：背景色</li><li>-c：输出安全颜色名</li><li>-o：粗体</li><li>-d：黯淡</li><li>-i：斜体</li><li>-r：反转前景和背景色</li><li>-u：下划线</li></ol></li><li>source:导入脚本</li><li>status： 查询运行时状态</li><li>suspend: 挂起 shell</li><li>time：命令运行需要的时间，$CMD_DURATION 结果。</li><li>trap: 收到外部信号响应</li><li>type: 返回名称的类型</li><li>ulimit：限制资源</li><li>umask：文件创建掩码</li><li>vared:交互式修改变量</li><li>wait：等待后台任务完成</li></ul></div></article><section class="article labels"><a class=category href=/categories/></a><a class=tag href=/tags/></a></section></div><div class="article bottom"><div class="article bottom title">更多文章</div><section class="article navigation"><p><a class=link href=/posts/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/><span class="iconfont icon-article"></span>Shell脚本编写指南</a></p><p><a class=link href=/posts/%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/><span class="iconfont icon-article"></span>主题配置</a></p></section><section class="article discussion"><script src=https://utteranc.es/client.js repo=Hipye/morris issue-term=pathname label theme=github-light crossorigin=anonymous async></script></section><div class=nav-bottom><div class="nav wrap bottom"><nav class=nav><a class="nav item" href=/archives/>归档 </a><a class="nav item" href=/categories/>分类 </a><a class="nav item" href=/tags/>标签</a></nav></div></div></div></section><section id=footer><div class=tongji style=text-align:center><span>共 16 篇文章 • 总计 13830 字</span></div><div class=footer-wrap><p class=copyright>©2019 Moriz.</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank rel="noopener noreferrer">Notepadium</a></p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script src=/js/hljs.min.6f979583f61e4ec5f0b94f94eab2e130ee628032474d374414dba4e33cc12097a0d01fe65b33378b23f6d3b053b95445.js integrity=sha384-b5eVg/YeTsXwuU+U6rLhMO5igDJHTTdEFNuk4zzBIJeg0B/mWzM3iyP207BTuVRF></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/core.min.5c7b67437ff4e36acca5d4f8fd7094276f09573657d699a765d6ad6b40a7c4e00993c7f07cb6637e726ae7c3f77fc968.js integrity=sha384-XHtnQ3/042rMpdT4/XCUJ28JVzZX1pmnZdata0CnxOAJk8fwfLZjfnJq58P3f8lo></script>
<script src=https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js></script>
<script type=text/javascript>var myChart=echarts.init(document.getElementById("heatmap")),option,data,rangeArr,listeners;window.onresize=function(){myChart.resize()};function heatmap_width(e){var t=new Date,o=t.setMonth(t.getMonth()-e),n=+new Date,t=+new Date(o),n=echarts.format.formatTime("yyyy-MM-dd",n),t=echarts.format.formatTime("yyyy-MM-dd",t),s=[];return s.push([t,n]),s}data=[],data.push(["2023-03-02",569]),data.push(["2023-02-25",106]),data.push(["2023-02-25",665]),data.push(["2023-02-19",78]),data.push(["0001-01-01",1019]),data.push(["2022-12-02",552]),data.push(["2022-11-23",247]),data.push(["2022-11-23",1765]),data.push(["2022-11-20",198]),data.push(["2022-11-20",322]),data.push(["2022-11-18",620]),data.push(["2022-11-11",704]),data.push(["2022-11-11",1050]),data.push(["2022-11-11",1225]),data.push(["2022-11-11",4311]),data.push(["2022-11-11",250]),data.push(["2019-05-28",0]),data.push(["2019-02-28",149]),data.push(["0001-01-01",0]),window.matchMedia("(max-width: 320px)").matches?(rangeArr=heatmap_width(3)):window.matchMedia("(max-width: 400px)").matches?(rangeArr=heatmap_width(5)):window.matchMedia("(max-width: 550px)").matches?(rangeArr=heatmap_width(6)):window.matchMedia("(max-width: 1021px)").matches?(rangeArr=heatmap_width(12)):window.matchMedia("(max-width: 1400px)").matches?(rangeArr=heatmap_width(9)):window.matchMedia("(max-width: 1920px)").matches?(rangeArr=heatmap_width(12)):window.matchMedia("(max-width: 2560px)").matches&&(rangeArr=heatmap_width(24));function LightOption(){option={title:{show:!0,top:0,left:20,text:"文章热力图",textStyle:{color:"rgba(29,43,76,.85)",fontSize:10}},tooltip:{padding:10,backgroundColor:"#777",borderColor:"#777",borderWidth:1,formatter:function(e){var t=e.value;return'<div style="font-size: 14px;color: white;">'+t[0]+": "+t[1]+"</div>"}},visualMap:{show:!1,top:0,min:0,max:5e3,textStyle:{color:"#7bc96f",fontWeight:"bold",fontFamily:"monospace"},calculable:!0,inRange:{symbol:"rect",color:["#ccffcc","#82c979","#43923c","#125b15","#002800"]},itemWidth:12,itemHeight:200,orient:"horizontal",right:0},calendar:{top:45,left:30,right:30,cellSize:[12,12],orient:"horizontal",range:rangeArr,splitLine:{show:!1,lineStyle:{width:.5,type:"solid",color:"white"}},itemStyle:{borderWidth:3.4,borderType:"solid",shadowColor:"#f3f6f9",shadowBlur:1.2,borderColor:"#f3f6f9",color:"#dddddd",opacity:1},yearLabel:{show:!0,position:"top",fontWeight:"normal",fontSize:12,color:"#24292e"},monthLabel:{nameMap:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fontWeight:"bolder",color:"#24292e",fontSize:8},dayLabel:{formatter:"{start}  1st",fontWeight:"bolder",nameMap:["","Mon","","Wed","","Fri",""],color:"#24292e",fontSize:8}},series:{type:"heatmap",coordinateSystem:"calendar",data}},option&&myChart.setOption(option)}function DarkOption(){option={title:{show:!0,top:0,left:20,text:"文章热力图",textStyle:{color:"#c7d5f6",fontSize:10}},tooltip:{padding:10,backgroundColor:"#777",borderColor:"#777",borderWidth:1,formatter:function(e){var t=e.value;return'<div style="font-size: 14px;color: white;">'+t[0]+": "+t[1]+"</div>"}},visualMap:{show:!1,top:0,min:0,max:5e3,textStyle:{color:"#c7d5f6",fontWeight:"bold",fontFamily:"monospace"},calculable:!0,inRange:{symbol:"rect",color:["#ccffcc","#82c979","#43923c","#125b15","#002800"],opacity:.8},itemWidth:12,itemHeight:200,orient:"horizontal",right:0},calendar:{top:45,left:30,right:30,cellSize:[12,12],orient:"horizontal",range:rangeArr,splitLine:{show:!1,lineStyle:{width:.5,type:"solid",color:"white"}},itemStyle:{borderWidth:3.4,borderType:"solid",shadowColor:"#0d1117",shadowBlur:1.2,borderColor:"#0d1117",color:"#24292e",opacity:1},yearLabel:{show:!0,position:"top",fontWeight:"normal",fontSize:12,color:"#c7d5f6"},monthLabel:{nameMap:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fontWeight:"bolder",color:"#c7d5f6",fontSize:8},dayLabel:{formatter:"{start}  1st",fontWeight:"bolder",nameMap:["","Mon","","Wed","","Fri",""],color:"#c7d5f6",fontSize:8}},series:{type:"heatmap",coordinateSystem:"calendar",data}},option&&myChart.setOption(option)}window.matchMedia("(prefers-color-scheme: dark)").matches?DarkOption():LightOption(),listeners={dark:e=>{e.matches&&DarkOption()},light:e=>{e.matches&&LightOption()}},window.matchMedia("(prefers-color-scheme: dark)").addListener(listeners.dark),window.matchMedia("(prefers-color-scheme: light)").addListener(listeners.light)</script></body></html>