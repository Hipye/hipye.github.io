<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.114.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Sed命令细节&nbsp;&ndash;&nbsp;拾集</title><link rel=stylesheet href=/css/core.min.2ad92d5c1b7eaa39fd1b193dcbedcc0ec9b9aec4f494cde71242648ef599c5ec3a8052a06aa28666bda62e8dcad5fed1.css integrity=sha384-KtktXBt+qjn9Gxk9y+3MDsm5rsT0lM3nEkJkjvWZxew6gFKgaqKGZr2mLo3K1f7R><meta name=twitter:card content="summary"><meta name=twitter:title content="Sed命令细节"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><img class="site logo" src=/images/avatar.png alt><span class="site name">拾集</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories/>分类</a><a class="nav item" href=/tags/>标签</a><a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Sed命令细节</h1><p class="article date">2023-09-16<span class=reading-time> • 预计阅读时间 3 分钟</span></p></section><article class="article markdown-body"><h1 id=sed替换的基本语法为>sed替换的基本语法为:</h1><p>sed &rsquo;s/原字符串/替换字符串/&rsquo;<br>特殊字符需要使用反斜线”\”进行转义。</p><p>单引号” ‘ ’”是没有办法用反斜线”\”转义的,这时候只要把命令中的单引号改为双引号就行了,格式如下：</p><h1 id=要处理的字符包含单引号>要处理的字符包含单引号</h1><p>sed &ldquo;s/原字符串包含&rsquo;/替换字符串包含&rsquo;/&rdquo;<br>命令中的三根斜线分隔符可以换成别的符号,有时候替换目录字符串的时候有较多斜线，这个时候换成其它的分割符是较为方便,只需要紧跟s定义即可。</p><h1 id=替换所有匹配关键字>替换所有匹配关键字</h1><p>sed &rsquo;s/原字符串/替换字符串/g&rsquo;<br><code>一些特殊字符的使用</code></p><p>　　”^”表示行首</p><p>　　”$”符号如果在引号中表示行尾，但是在引号外却表示末行(最后一行)<br>　　</p><h1 id=注意这里的----符号如果没有-就会直接将匹配到的字符串替换掉>注意这里的 " & " 符号，如果没有 “&”，就会直接将匹配到的字符串替换掉</h1><p>sed &rsquo;s/^/添加的头部&/g&rsquo; 　　　　 #在所有行首添加<br>sed &rsquo;s/$/&添加的尾部/g&rsquo; 　　　　 #在所有行末添加<br>sed &lsquo;2s/原字符串/替换字符串/g&rsquo;　 #替换第2行
sed &lsquo;$s/原字符串/替换字符串/g&rsquo; #替换最后一行<br>sed &lsquo;2,5s/原字符串/替换字符串/g&rsquo; #替换2到5行<br>sed &lsquo;2,$s/原字符串/替换字符串/g&rsquo; #替换2到最后一行</p><h1 id=批量替换字符串>批量替换字符串</h1><pre tabindex=0><code>sed -i &#34;s/查找字段/替换字段/g&#34; `grep 查找字段 -rl 路径`     
sed -i &#34;s/oldstring/newstring/g&#34; `grep oldstring -rl yourdir         
</code></pre><h1 id=sed处理过的输出是直接输出到屏幕上的使用参数i直接在文件中替换>sed处理过的输出是直接输出到屏幕上的,使用参数”i”直接在文件中替换。</h1><h1 id=替换文件中的所有匹配项>替换文件中的所有匹配项</h1><p>sed -i &rsquo;s/原字符串/替换字符串/g&rsquo; filename<br>8. 多个替换可以在同一条命令中执行,用分号”;”分隔，其格式为:</p><h1 id=同时执行两个替换规则>同时执行两个替换规则</h1><p>sed &rsquo;s/^/添加的头部&/g；s/$/&添加的尾部/g&rsquo;</p><p>sed替换字符串(变量)
sed “s/查找字段/替换字段/g”</p><p>echo helloworld|sed ‘s/hello/world/g’</p><p>sed 替换字符串以变量形式</p><h1 id=sed命令使用双引号的情况下可以使用var变量直接引用>sed命令使用双引号的情况下，可以使用$var（变量）直接引用：</h1><p>echo | sed &ldquo;s/^/$RANDOM.rmvb_/g&rdquo;<br>13562.rmvb_
sed命令使用单引号的情况下，可以使用&rsquo;"$var"&lsquo;引用（单引号，然后双引号，变量）：<br>echo | sed &rsquo;s/^/&rsquo;"$RANDOM"&rsquo;.rmvb_/g&rsquo;<br>2442.rmvb_<br>sed中执行外部命令。
sed命令使用单引号的情况下使用&rsquo;<code>shell command</code>&lsquo;或者&rsquo;$(shell command)&lsquo;引用命令执行的结果：<br>echo | sed &rsquo;s/^/&rsquo;<code>echo $RANDOM</code>&rsquo;.rmvb_/g&rsquo;<br>7700.rmvb_# 结果</p><h1 id=上面的命令使用了旧式的命令替换也可以采用新式的命令替换方法如下>上面的命令使用了旧式的命令替换，也可以采用新式的命令替换方法，如下：</h1><p>echo | sed &rsquo;s/^/&rsquo;$(echo $RANDOM)&rsquo;.rmvb_/g&rsquo;<br>13856.rmvb_# 结果</p><h1 id=下面例子取用当前日期作为结果的一部分如下>下面例子取用当前日期作为结果的一部分，如下：</h1><p>echo | sed &rsquo;s/^/&rsquo;$(date +"%Y%m%d")&rsquo;.rmvb_/g&rsquo;<br>20130401.rmvb_ # 结果<br>sed命令中使用双引号的情况下，直接<code>shell command</code>或者$(shell command)引用命令执行。<br>echo | sed &ldquo;s/^/$(date +"%Y%m%d&rdquo;).rmvb_/g"<br>20130401.rmvb_# 结果</p><h1 id=使用环境变量random以及旧式命令替换的例子>使用环境变量$RANDOM以及旧式命令替换的例子：</h1><p>echo | sed &ldquo;s/^/<code>echo $RANDOM</code>.rmvb_/g&rdquo;</p></article><section class="article labels"><a class=category href=/categories/linux/>Linux</a><a class=tag href=/tags/></a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/posts/ubuntu%E4%B8%8A%E6%9E%84%E5%BB%BAclang_llvm/><span class="iconfont icon-article"></span>Ubuntu上构建clang|llvm</a></p><p><a class=link href=/posts/bashrc%E5%92%8Cvimrc%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86/><span class="iconfont icon-article"></span>bashrc和vimec配置以及详细</a></p></section><section class="article discussion"><script src=https://utteranc.es/client.js repo=Hipye/morris issue-term=pathname label theme=github-light crossorigin=anonymous async></script></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>©2019 Moriz.</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank rel="noopener noreferrer">Notepadium</a></p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=/js/hljs.min.6f979583f61e4ec5f0b94f94eab2e130ee628032474d374414dba4e33cc12097a0d01fe65b33378b23f6d3b053b95445.js integrity=sha384-b5eVg/YeTsXwuU+U6rLhMO5igDJHTTdEFNuk4zzBIJeg0B/mWzM3iyP207BTuVRF></script><script>hljs.initHighlightingOnLoad()</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XXXXXXXXXX",{anonymize_ip:!1})}</script><script src=/js/core.min.5c7b67437ff4e36acca5d4f8fd7094276f09573657d699a765d6ad6b40a7c4e00993c7f07cb6637e726ae7c3f77fc968.js integrity=sha384-XHtnQ3/042rMpdT4/XCUJ28JVzZX1pmnZdata0CnxOAJk8fwfLZjfnJq58P3f8lo></script></body></html>